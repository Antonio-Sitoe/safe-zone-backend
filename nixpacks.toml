providers = ["nodejs"]

[phases.setup]
nixPkgs = ["nodejs", "curl"]

[phases.install]
cmds = [
  "curl -fsSL https://bun.sh/install | bash",
  "export PATH=\"$HOME/.bun/bin:$PATH\"",
  "bun install --frozen-lockfile"
]

[phases.build]
cmds = [
  "export PATH=\"$HOME/.bun/bin:$PATH\"",
  "bun run build"
]

[start]
cmd = "export PATH=\"$HOME/.bun/bin:$PATH\" && bun run start & bun run worker"
